{% extends "base.html" %}

{% block title %}

Profile View

{% endblock title %}


{% block code %}
<div class="row">
	<br>
	<h3>{{ user.first_name }} {{ user.last_name }}</h3>
	<br>
	<table>
		<tr>
			<td>
				<div class="col-md-4">
					<div class="card list-card">
						<img class="card-img-top thumbnail" src="{{user.profile.image.url}}" alt="Card image cap">
					</div>
				</div>
			</td>
			<td width= 400px>
					<h5>Username: {{ user.username }}</h5> <br>
					<h5>Birthday: {{ user.profile.birthday }}</h5> <br>
					<h5>Bio: {{ user.profile.bio }}</h5> <br>
					<h5>Following</h5><br>
					<h5>Followers</h5><br>
					{% if user_obj %}
					<a href="{% url 'profile_update' %}" class="btn btn-outline-dark"> Update</a>
					{% else %}
					<button onclick="fol({{user.id}})" id="follow_text" class="btn btn-outline-dark">Follow <i ></i></button>  
					{% endif %}
			</td>
		</tr>

	</table>
	<br><br><br>
	{% for x in post %}
		<div class="col-lg-4">
			<div class="card list-card">
				<a href="/products/detail/{{x.slug}}/">
					<img class="card-img-top thumbnail" src="{{x.image.url}}" alt="Card image cap">
				</a>

			</div>
		</div>
	{% endfor %}

</div>

<script>
	function fol(id){
		$.ajax({
			type: "GET",
			url: "/followuser/"+id,
			error: function(){
				console.log("ERROR!")
			},
			success: function(data){
				console.log(data);
				if (data.action==="followed"){
					$(follow_text).text("Unfollow")
				}
				else{
					$(follow_text).text("Follow")
			
				}

			},
				
		})
	}

</script>


{% endblock code %}
